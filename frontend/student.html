<!DOCTYPE html>
<html>
<head>
  <title>Student Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="navbar">
  <div>Online Quiz System</div>
  <div class="nav-links">
    <button onclick="goHome()">Home</button>
    <button id="logoutBtn" onclick="logout()">Logout</button>
  </div>
</div>

<div class="page">
  <div class="container">
    <div class="card">
      <h2>Student Dashboard</h2>
      <p>Welcome! Click below to start your quiz.</p>

      <button onclick="goQuiz()">Attempt Quiz</button>
    </div>
  </div>
</div>

<script>
// ================= SECURITY CHECK =================
if(!localStorage.getItem("role") || localStorage.getItem("role") !== "student"){
  window.location.href = "/login.html";
}

// ================= GET SECTION FROM URL =================
const params = new URLSearchParams(window.location.search);
const section = params.get("section");

// Safety check
if(!section){
  document.querySelector(".card").innerHTML =
    "<p>No quiz selected. Please go back and choose a quiz.</p>";
}

// ================= GO TO QUIZ =================
function goQuiz(){
  if(!section){
    alert("No quiz section selected");
    return;
  }
  window.location.href = "/quiz.html?section=" + section;
}

// ================= NAVIGATION =================
function logout(){
  localStorage.removeItem("role");
  localStorage.removeItem("email");
  window.location.href = "/login.html";
}

function goHome(){
  window.location.href = "/";
}

// Hide logout if not logged in
if(!localStorage.getItem("role")){
  const btn = document.getElementById("logoutBtn");
  if(btn) btn.style.display = "none";
}
</script>

</body>
</html>
